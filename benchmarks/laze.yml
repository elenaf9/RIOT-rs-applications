modules:
  - name: single-core
    help: single core 
    provides_unique:
      - n-cores
    env:
      global:
        RIOT_RS_REV: cedaab07f4d21323377f76c07177b9b9bf7280ca
        FEATURES:
          - single-core
  - name: multicore-v1
    help: multicore version 1
    provides_unique:
      - n-cores
    env:
      global:
        RIOT_RS_REV: bc8711e0dbdcca9cb0250096d89773ce5570451e
        FEATURES:
          - multicore-v1
  - name: multicore-v2
    help: multicore version 2
    provides_unique:
      - n-cores
    env:
      global:
        RIOT_RS_REV: eb2e784c726580d61bc778628287adc6cef6a3bb
        FEATURES:
          - multicore-v2
  - name: n-cores-default
    help: default number of cores
    selects:
      - patch
      - ?single-core
      - ?multicore-v1
  - name: multicore-default
    help: default version for multicore testing
    selects:
      - patch
      - ?multicore-v1
  - name: patch
    help: patch used repo revision
    env: 
      global:
        UPSTREAM_REPO: https://github.com/future-proof-iot/RIOT-rs.git
        FORKED_REPO: https://github.com/elenaf9/RIOT-rs.git
        CARGO_ARGS:
          - --config 'patch."${UPSTREAM_REPO}".riot-rs.git="${FORKED_REPO}"'
          - --config 'patch."${UPSTREAM_REPO}".riot-rs.rev="${RIOT_RS_REV}"'
          - --config 'patch."${UPSTREAM_REPO}".riot-rs-runqueue.git="${FORKED_REPO}"'
          - --config 'patch."${UPSTREAM_REPO}".riot-rs-runqueue.rev="${RIOT_RS_REV}"'
          - --config 'patch."${UPSTREAM_REPO}".riot-rs-boards.git="${FORKED_REPO}"'
          - --config 'patch."${UPSTREAM_REPO}".riot-rs-boards.rev="${RIOT_RS_REV}"'

subdirs:
  - bench_async
  - bench_busy_poll
  - bench_counter
  - bench_critical_section
  - bench_fib
  - bench_leibnitz_pi
  - bench_matrix_mult
  - bench_sched
  - bench_sched_yield
  - bench_thread_flags
  - runqueue
